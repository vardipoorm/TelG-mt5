#  دریافت اعلان‌ پوزیشن و آلارم و گزارشگیری متاتریدر ۵ در تلگرام
V 1.1

این اسکریپت پایتون به ترمینال متاتریدر ۵ شما متصل شده و رویدادهای معاملاتی را به صورت لحظه‌ای به تلگرام شما ارسال می‌کند. همچنین قابلیت دریافت گزارش‌های معاملاتی از طریق دستورات تلگرام را داراست.

اگر به هر دلیلی از ربات خوشت اومد این ادرس Ton ولت منه هر چی کرمته :)
```bash
UQDCMQm4IiKfkbK7knZnDiIJ4zqzBkmx7ozJDk1Uk6OQrNHG
```

## قابلیت‌ها
  * دریافت آلرت(از طریق اکسپرت)
  * اعلان لحظه‌ای برای باز شدن اردرهای در حال انتظار (Pending Orders).
  * اعلان لحظه‌ای برای بسته شدن پوزیشن‌ها (TP, SL, دستی, partial).
  * نمایش اطلاعات کامل معامله شامل سود، حجم، کامنت و زمان دقیق بروکر و... .
  * دریافت گزارش‌های معاملاتی همراه چارت رشد اکانت برای بازه‌های زمانی مختلف (ساعتی، روزانه، هفتگی، ماهانه) با ارسال دستور به ربات.
  * محاسبه و نمایش آمار کلیدی مانند وین ریت و درصد رشد حساب در گزارش‌ها.
  * اتصال مجدد خودکار در صورت قطع شدن موقت اینترنت یا بسته شدن متاتریدر.
  * تشخیص خودکار منطقه زمانی (Timezone) سرور بروکر برای نمایش دقیق تاریخ و ساعت.
  * قابلیت اتصال به یک نسخه خاص از متاتریدر در صورت نصب بودن چندین نسخه.

## پیش‌نیازها

قبل از شروع، مطمئن شوید که موارد زیر را آماده کرده‌اید:

1.  **پایتون:** نسخه 3.10(دقیقا این نسخه چون کتابخانه متاتریدر تا این نسخه را پشتیبانی میکند)
2.  **متاتریدر ۵:** نرم‌افزار باید روی سیستم عامل ویندوز نصب و در حال اجرا باشد. (آخرین نسخه ی تست شده build 5326)
3.  **ربات تلگرام:** شما باید یک ربات تلگرام ساخته و **توکن (Token)** آن را دریافت کرده باشید.

*.   از `@BotFather` استفاده کنید و ربات رو درست کنید و توی گوگل سرچ کنید باقیشو من حوصله ندارم.

.
برای دریافت توکن داخل `@BotFather` بنویسید `/start` و گزینه ی `/token - get authorization token` رو بزنید. 

این دستورات رو هم به ربات بدید با دستور `/setcommands`
```bash
clear - پاکسازی پیامهای غیرضرور
custom_report - گزارش تاریخ دستی
day_report - گزارش روز خاص
today - گزارش روز جاری
thisweek - گزارش هفته ی جاری
thismonth - گزارش ماه جاری
time - گزارش 24 ساعت گذشته
3days - گزارش سه روز گذشته
7day - گزارش 7 روز گذشته
14day - گزارش 14 روز گذشته
30day - گزارش 30 روز گذشته
60day - گزارش 60 روز گذشته
90day - گزارش 90 روز گذشته
yesterday - گزارش دیروز
lastweek - گزارش هفته ی گذشته
last2weeks - گزارش دو هفته ی گذشته
lastmonth - گزارش ماه گذشته
last2months - گزارش دو ماه گذشته
last3months - گزارش سه ماه گذشته
```
باید این تایید رو دریافت کنید
```bash
Success! Command list updated. /help
```
 *- حالا یه متن بفرستید توی باتتون هر متنی باشه خوبه، که بتونید chat id دریافت کنید.
 
5.  **آیدی عددی تلگرام:** شما باید `CHAT_ID` عددی خود را بدانید. (می‌توانید آن را از ربات‌هایی مانند `@userinfobot` دریافت کنید).

## نصب و راه‌اندازی

برای راه‌اندازی این اسکریپت، مراحل زیر را دنبال کنید.

### قدم اول: دانلود کد

کد پروژه را از این صفحه دانلود کرده و در یک پوشه دلخواه از حالت فشرده خارج کنید.

### قدم دوم: نصب کتابخانه‌های مورد نیاز

یک ترمینال (CMD یا PowerShell) باز کرده و دستورات را به ترتیب برای نصب تمام کتابخانه‌های مورد نیاز اجرا کنید:

```bash
pip install pip-review
pip-review --auto
pip install MetaTrader5 "python-telegram-bot==13.15" pytz python-dateutil psutil matplotlib numpy scipy arabic_reshaper python-bidi flask colorlog

```
### قدم سوم: تنظیمات اسکریپت
راهنمای پیکربندی:

۱. فایل config.ini.example را به config.ini تغییر نام دهید و آن را باز کنید.

۲. مقادیر TOKEN، CHAT_ID و MT5_PATH را با اطلاعات واقعی خود جایگزین کنید.
    
 **نحوه پیدا کردن مسیر MT5_PATH:** روی شورتکات متاتریدر راست کلیک کرده، `Properties` را انتخاب و متن داخل فیلد `Target` را کپی کنید.
 
## حالا به متاتریدر بروید و توی تنظیمات این تیک رو بزنید.

<img width="622" height="402" alt="image" src="https://github.com/user-attachments/assets/4cec7ca0-9387-4d84-8e45-ae4106470088" />

## اجرای اسکریپت
 

پس از نصب و تنظیم، فایل زیر را اجرا کنید:

```bash
TelG-mt5.bat
```

پس از اجرا، اسکریپت به صورت خودکار به متاتریدر و تلگرام متصل شده و شروع به کار می‌کند.

## خروج از اسکریپت
روی کیبورد Ctrl+C بزنید به همین راحتی

## نصب اکسپرت برای دریافت آلرت
اکسپرت موجود در پوشه را در متاتریدر خود نصب کنید(نحوه ی نصب گوگل شود)

این آدرس را استثنا کنیددر تنظیمات متاتریدر و تیک ها رو هم طبق تصویر درست کنید
```http://127.0.0.1:5000```

<img width="622" height="402" alt="image" src="https://github.com/user-attachments/assets/a643e93a-aa28-4cab-93a6-b5fd16c5e038" />

<img width="858" height="554" alt="image" src="https://github.com/user-attachments/assets/1c9f63f2-96cd-46a8-99e2-4217d5d77cc2" />

**تنظیمات اکسپرت**: اکسپرت رو میتونید روی چندین چارت و چندین نماد اجرا کنید اما در تنظیمات اکسپرت، برای یکی از اکسپرت ها گزینه ی `master` را `true` کنید و باقی `false`
## نحوه استفاده

  * **مانیتورینگ لحظه‌ای:** ربات به صورت خودکار باز و بسته شدن پوزیشن‌ها را به شما اطلاع می‌دهد.
  * **دریافت گزارش:** برای دریافت گزارش‌های معاملاتی، دستورات زیر را در تلگرام به ربات خود ارسال کنید:
      * `/today` (گزارش امروز)
      * `/last3days` (گزارش ۳ روز گذشته)
      * `/week_report` (گزارش ۷ روز گذشته)
      * `/lastweek` (گزارش هفته کامل گذشته از شنبه تا جمعه)
      * `/lastmonth` (گزارش ماه کامل گذشته)
      * ... و بقیه دستوراتی که تعریف شده‌اند.

-----

تصاویر 

<img width="485" height="755" alt="image" src="https://github.com/user-attachments/assets/7070a07b-220b-4ab3-86b1-ded57790386e" />

<img width="481" height="233" alt="image" src="https://github.com/user-attachments/assets/dc6bdaf0-3aac-4b6d-98aa-358230e17249" />

<img width="575" height="628" alt="image" src="https://github.com/user-attachments/assets/d0485334-99e2-4c74-ac1a-2c4ba951a386" />

<img width="959" height="880" alt="image" src="https://github.com/user-attachments/assets/4bbc2e35-18f3-447c-8ef4-99b2c93f54e8" />











